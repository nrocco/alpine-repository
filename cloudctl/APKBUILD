# Contributor: Nico Di Rocco <dirocco.nico@gmail.com>
# Maintainer: Nico Di Rocco <dirocco.nico@gmail.com>
pkgname=cloudctl
pkgver=0.0.3
pkgrel=0
pkgdesc="a tiny wrapper around qemu to launch virtual machines"
url="https://nrocco.github.io"
arch="noarch"
license="Apache-2.0"
depends="qemu qemu-system-x86_64 qemu-img dnsmasq netcat-openbsd iptables iproute2"
makedepends=""
install="cloudctl.post-install"
subpackages=""
options="!check"
source="dnsmasq.conf
        modules.conf
        cloudctl
        cloud-ifup
        cloud-ifdown
        bash-completion"
builddir="$srcdir"

build() {
    return 0
}

package() {
    cd "$builddir"
    install -D -m644 bash-completion "$pkgdir"/usr/share/bash-completion/completions/cloudctl
    install -D -m644 dnsmasq.conf "$pkgdir"/etc/dnsmasq.d/cloud.conf
    install -D -m644 modules.conf "$pkgdir"/etc/modules-load.d/cloud.conf

    install -D -m755 cloudctl "$pkgdir"/usr/bin/cloudctl
    install -D -m755 cloud-ifup "$pkgdir"/usr/share/cloudctl/cloud-ifup
    install -D -m755 cloud-ifdown "$pkgdir"/usr/share/cloudctl/cloud-ifdown
}

sha512sums="4eb3c47de4e7a6549a6c103eaf64feb99456bd24c77054325caf2e9a119c5e2703d5b470196f6857694824bcb89ca142f61d034e1bee2f3d9e2424abf2ccbd58  dnsmasq.conf
83e8028ab4b3fe96f46632b3d073840992d6756538103198da203a596ff3fdea991d2784e4062b16b7020307528309167ca135e35c538a73aa4c28cc494511c3  modules.conf
1ec8c1639aeea4260a6561f1d6a391290324925835752f7ee9d0a913b9001130b10898c1ef772a61eece2c2640844b7db8680a7b331cd2715009a7c6979ee4fc  cloudctl
5f21500a5cf0ede2e62450661cfc65f4dad4e0f26e67e78a6e84dea6ef261260d5e3d0753bce156f8077dd91fb02a6436ed3ce3a0a4bffedef91c1de064f784c  cloud-ifup
538902414a6ce97ce50c39a502f4faa678a1543e7a8d3fbb76448d6c1e4b6c3b6f2168f0d3d97901586b956070c67daf3d5070197313e4ad61efb621461bb8c1  cloud-ifdown
3ec213db54364e6b4e3fd928fe41c4b6ba79a0170c3d2812cbad44bfebce34be4dcb8550c409d79971e171cf61f98f89b0af790c92c770ac35c48da8c2644872  bash-completion"
